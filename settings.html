<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Settings â€” Roots Quiz</title>
<style>
:root{--accent-start:#0ea5e9;--accent-end:#0284c7;--bg-top:#f8fbff;--bg-bottom:#eef6ff;--ink:#0f172a}
html,body{margin:0;padding:0;background:linear-gradient(180deg,var(--bg-top),var(--bg-bottom));color:var(--ink);font:16px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif}
.wrap{max-width:760px;margin:28px auto;padding:20px}
.brand{background:linear-gradient(90deg,var(--accent-start),var(--accent-end));color:#fff;padding:14px 18px;border-radius:10px;display:flex;align-items:center;justify-content:space-between}
.brand h1{margin:0;font-size:18px}
.card{background:#fff;border-radius:12px;padding:18px;margin-top:18px;box-shadow:0 6px 20px rgba(2,20,48,0.06)}
.field{display:flex;align-items:center;gap:12px;margin:12px 0}
.field label{width:160px;font-weight:600;color:#0b3b57}
.preview{height:80px;border-radius:8px;border:1px solid rgba(2,6,23,0.06);box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);}
.btns{display:flex;gap:10px;justify-content:flex-end;margin-top:18px}
.button{background:var(--accent-start);color:#fff;padding:8px 12px;border-radius:8px;border:none;cursor:pointer}
.button.ghost{background:transparent;color:var(--accent-start);border:1px solid rgba(14,165,233,0.2)}
</style>
</head>
<body>
<div class="wrap">
  <div class="brand">
    <h1>Settings</h1>
    <a href="index.html" style="color:#fff;text-decoration:none;font-weight:600">Back</a>
  </div>

  <div class="card">
    <p style="margin:0 0 12px">Customize site colors. Click <strong>Save</strong> to apply and return to the main page.</p>

    <div class="field">
      <label for="accent">Accent start</label>
      <input id="accent" type="color" value="#0ea5e9">
      <div id="accentPreview" class="preview" style="width:160px;background:linear-gradient(90deg,#0ea5e9,#0284c7)"></div>
    </div>

    <div class="field">
      <label for="accentEnd">Accent end</label>
      <input id="accentEnd" type="color" value="#0284c7">
      <div id="accentEndPreview" class="preview" style="width:160px;background:linear-gradient(90deg,#0ea5e9,#0284c7)"></div>
    </div>

    <div class="field">
      <label for="bgTop">Background top</label>
      <input id="bgTop" type="color" value="#f8fbff">
      <div id="bgTopPreview" class="preview" style="width:120px;background:var(--bg-top)"></div>
    </div>

    <div class="field">
      <label for="bgBottom">Background bottom</label>
      <input id="bgBottom" type="color" value="#eef6ff">
      <div id="bgBottomPreview" class="preview" style="width:120px;background:var(--bg-bottom)"></div>
    </div>

    <div class="field">
      <label for="modelSelect">Assistant model</label>
      <select id="modelSelect" style="padding:8px;border-radius:8px">
        <option value="gpt-5-mini">GPT-5 Mini (recommended)</option>
        <option value="gpt-4o">GPT-4o</option>
        <option value="gpt-4">GPT-4</option>
        <option value="gpt-3.5">GPT-3.5</option>
      </select>
      <div style="font-size:13px;color:#6b7280;max-width:280px">This selects the preferred model for this client (stored locally). Changing it here affects only the current browser/profile.</div>
    </div>

    <div class="btns">
      <button id="reset" class="button ghost">Reset</button>
      <button id="save" class="button">Save</button>
    </div>
  </div>
</div>

<script>
(function(){
  const key='vocab.theme';
  const defaults={"--accent-start":"#0ea5e9","--accent-end":"#0284c7","--bg-top":"#f8fbff","--bg-bottom":"#eef6ff"};
  const accent=document.getElementById('accent');
  const accentEnd=document.getElementById('accentEnd');
  const bgTop=document.getElementById('bgTop');
  const bgBottom=document.getElementById('bgBottom');
  const accentPreview=document.getElementById('accentPreview');
  const accentEndPreview=document.getElementById('accentEndPreview');
  const bgTopPreview=document.getElementById('bgTopPreview');
  const bgBottomPreview=document.getElementById('bgBottomPreview');

  function load(){
    const raw=localStorage.getItem(key);
    const theme = raw ? Object.assign({}, defaults, JSON.parse(raw)) : defaults;
    accent.value=theme['--accent-start'];
    accentEnd.value=theme['--accent-end'];
    bgTop.value=theme['--bg-top'];
    bgBottom.value=theme['--bg-bottom'];
    updatePreviews();
  }
  function updatePreviews(){
    accentPreview.style.background = `linear-gradient(90deg, ${accent.value}, ${accentEnd.value})`;
    accentEndPreview.style.background = `linear-gradient(90deg, ${accent.value}, ${accentEnd.value})`;
    bgTopPreview.style.background = bgTop.value;
    bgBottomPreview.style.background = bgBottom.value;
    document.documentElement.style.setProperty('--accent-start', accent.value);
    document.documentElement.style.setProperty('--accent-end', accentEnd.value);
    document.documentElement.style.setProperty('--bg-top', bgTop.value);
    document.documentElement.style.setProperty('--bg-bottom', bgBottom.value);
  }
  function shade(hex, percent) {
    // simple shade function, percent negative to darken
    const f=parseInt(hex.slice(1),16),t=percent<0?0:255,p=Math.abs(percent)/100;
    const R=Math.round((t - (t-f>>16)) * p + (f>>16));
    const G=Math.round((t - (t-(f>>8&0x00FF))) * p + (f>>8&0x00FF));
    const B=Math.round((t - (t-(f&0x0000FF))) * p + (f&0x0000FF));
    return `#${(R<<16|G<<8|B).toString(16).padStart(6,'0')}`;
  }

  accent.addEventListener('input',updatePreviews);
  accentEnd.addEventListener('input',updatePreviews);
  bgTop.addEventListener('input',updatePreviews);
  bgBottom.addEventListener('input',updatePreviews);

  document.getElementById('save').addEventListener('click',()=>{
    const theme={"--accent-start":accent.value,"--accent-end":accentEnd.value,"--bg-top":bgTop.value,"--bg-bottom":bgBottom.value};
    localStorage.setItem(key,JSON.stringify(theme));
    // persist selected assistant model preference for this client
    try{
      const modelSelect = document.getElementById('modelSelect');
      if(modelSelect && modelSelect.value) localStorage.setItem('vocab.gpt_model', modelSelect.value);
    }catch(e){console.warn('Failed to save model preference',e)}
    // redirect back to main
    window.location.href='index.html';
  });
  document.getElementById('reset').addEventListener('click',()=>{
    localStorage.removeItem(key);
    // also remove model preference
    try{ localStorage.removeItem('vocab.gpt_model'); }catch(e){}
    // restore defaults on this page and redirect
    window.location.href='index.html';
  });

  // load current values including model preference
  function loadModel(){
    try{
      const model = localStorage.getItem('vocab.gpt_model') || 'gpt-5-mini';
      const sel = document.getElementById('modelSelect'); if(sel) sel.value = model;
    }catch(e){console.warn('Failed to load model preference',e)}
  }

  load(); loadModel();
})();
</script>
</body>
</html>